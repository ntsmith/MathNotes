{%- assign anc_count = ancestors | size -%}
<nav class="sidebar">
  <ul class="sidebar-list">
    <li><a href="{{ site.url }}/">Home</a></li>
    {% for anc in include.ancestors %}
      {% assign clean_url = anc.url | remove: 'index.html' | remove: '.html' | split: '/' | where_exp: 'p', 'p != ""' | join: '/' %}
      <ul>
        <li><a href="{{ site.url }}/{{ clean_url }}">{{ anc.title }}</a></li>
      {% if forloop.last %}
        <ul>
        {% for sib in include.siblings %}
          {% assign clean_url = sib.url | remove: 'index.html' | remove: '.html' | split: '/' | where_exp: 'p', 'p != ""' | join: '/' %}
          <li>
            <a href="{{ clean_url }}">
              {{ sib.title }}
              {% if sib.url == page.url %}<strong>(current)</strong>{% endif %}
            </a>
          </li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endfor %}
    {%- for i in (1..anc_count) -%}
      </li></ul>
    {%- endfor -%}
  </ul>
</nav>